name: "Generic E-commerce"
description: "A generic recipe for most standard e-commerce sites"
version: "1.0.0"
siteUrl: "*"

selectors:
  # Core product fields
  title: 
    - "h1.product-title"
    - "h1.product-name"
    - ".product-title"
    - ".product-name"
    - "h1"
  
  price:
    - ".product-price .price"
    - ".price .amount"
    - ".product-price"
    - ".price"
    - "[data-price]"
  
  sku:
    - ".product-sku"
    - ".sku"
    - "[data-sku]"
    - ".product-code"
  
  description:
    - ".product-description"
    - ".description"
    - ".product-details"
    - "#description"
  
  shortDescription:
    - ".product-summary"
    - ".short-description"
    - ".excerpt"
  
  images:
    - ".product-gallery img"
    - ".product-images img"
    - ".gallery img"
    - ".product-photos img"
  
  stock:
    - ".stock-status"
    - ".availability"
    - ".in-stock"
    - ".out-of-stock"
  
  category:
    - ".breadcrumb"
    - ".category"
    - ".product-category"
  
  # Product discovery
  productLinks:
    - ".product-item a"
    - ".product-card a"
    - ".product a"
    - "a[href*='/product/']"
    - "a[href*='/item/']"
  
  # Pagination
  pagination:
    nextPage: ".pagination .next"
    maxPages: 50
  
  # Attributes and variations
  attributes:
    - ".product-options"
    - ".product-attributes"
    - ".variations"
    - ".options"
  
  variations:
    - ".product-variants"
    - ".variants"
    - ".product-options select"
  
  # Embedded data sources
  embeddedJson:
    - "script[type='application/ld+json']"
    - "script[data-json]"
    - "#__NEXT_DATA__"

transforms:
  title:
    - "trim: "
    - "replace:^\\s+|\\s+$"
  
  price:
    - "replace:[^\\d.,]"
    - "replace:,|."
  
  description:
    - "trim: \n\t"
    - "replace:\\s+ | "
  
  attributes:
    Color:
      - "replace:^\\s+|\\s+$"
      - "replace:^\\s*-\\s*"
    Size:
      - "replace:^\\s+|\\s+$"
      - "replace:^\\s*-\\s*"

behavior:
  waitForSelectors:
    - ".product-title"
    - ".product-price"
  scrollToLoad: false
  useHeadlessBrowser: false
  rateLimit: 100  # Reduced from 1000ms to 100ms for faster processing
  maxConcurrent: 8  # Increased from 3 to 8 for better concurrent processing

fallbacks:
  title:
    - "h1"
    - ".title"
  price:
    - ".price"
    - "[data-price]"
  images:
    - "img[src*='product']"
    - "img"

validation:
  requiredFields:
    - "title"
    - "price"
    - "images"
  priceFormat: "\\d+(\\.\\d{2})?"
  skuFormat: "[A-Za-z0-9-_]+"
