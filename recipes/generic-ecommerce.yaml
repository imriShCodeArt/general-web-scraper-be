name: 'Generic E-commerce'
description: 'A generic recipe for most standard e-commerce sites'
version: '1.0.0'
siteUrl: '*'

selectors:
  # Core product fields
  title:
    - 'h1.product-title'
    - 'h1.product-name'
    - '.product-title'
    - '.product-name'
    - 'h1'

  price:
    - '.product-price .price'
    - '.price .amount'
    - '.product-price'
    - '.price'
    - '[data-price]'

  sku:
    - '.product-sku'
    - '.sku'
    - '[data-sku]'
    - '.product-code'

  description:
    - '.product-description'
    - '.description'
    - '.product-details'
    - '#description'

  shortDescription:
    - '.product-summary'
    - '.short-description'
    - '.excerpt'

  images:
    - '.product-gallery img'
    - '.product-images img'
    - '.gallery img'
    - '.product-photos img'

  stock:
    - '.stock-status'
    - '.availability'
    - '.in-stock'
    - '.out-of-stock'

  category:
    - '.breadcrumb'
    - '.category'
    - '.product-category'

  # Product discovery
  productLinks:
    - '.product-item a'
    - '.product-card a'
    - '.product a'
    - "a[href*='/product/']"
    - "a[href*='/item/']"

  # Pagination
  pagination:
    nextPage: '.pagination .next'
    maxPages: 50

  # Attributes and variations
  attributes:
    - 'select[name*="attribute"]'
    - 'input[name*="attribute"]'
    - '.variation-select'
    - '.attribute-select'
    - '.product-attribute-select'
    - '.product-options'
    - '.product-attributes'
    - '.variations'
    - '.options'

  variations:
    - '.variations'
    - '.product-variations'
    - '.woocommerce-variations'
    - '.variation-selector'
    - '.product-options'
    - '.variation-options'
    - '.product-variants'
    - '.variants'
    - '.product-options select'

  # Embedded data sources
  embeddedJson:
    - "script[type='application/ld+json']"
    - 'script[data-json]'
    - '#__NEXT_DATA__'

transforms:
  title:
    - 'trim: '
    - "replace:^\\s+|\\s+$"

  price:
    - "replace:[^\\d.,]"
    - 'replace:,|.'

  description:
    - "trim: \n\t"
    - "replace:\\s+ | "

  attributes:
    Color:
      - "replace:^\\s+|\\s+$"
      - "replace:^\\s*-\\s*"
    Size:
      - "replace:^\\s+|\\s+$"
      - "replace:^\\s*-\\s*"

behavior:
  waitForSelectors:
    - '.product-title'
    - '.product-price'
    - '.variations_form'
    - '.woocommerce-variations-form'
    - '.variation-form'
    - '.product-variation-form'
    - 'form.variations'
  scrollToLoad: false
  useHeadlessBrowser: false
  rateLimit: 25 # Further reduced from 100ms to 25ms for maximum speed
  maxConcurrent: 15 # Increased from 8 to 15 for better concurrent processing
  # New performance optimizations
  fastMode: true # Enable fast mode for better performance
  skipImages: false # Keep images but optimize loading
  skipStyles: true # Skip CSS for faster processing
  skipScripts: true # Skip non-essential JavaScript
  timeout: 10000 # Reduced timeout for faster failure detection

fallbacks:
  title:
    - 'h1'
    - '.title'
  price:
    - '.price'
    - '[data-price]'
  images:
    - "img[src*='product']"
    - 'img'

validation:
  requiredFields:
    - 'title'
    - 'price'
    - 'images'
  priceFormat: "\\d+(\\.\\d{2})?"
  skuFormat: '[A-Za-z0-9-_]+'

# WooCommerce-specific validation configuration
woocommerceValidation:
  # Required selectors for WooCommerce compatibility
  requiredSelectors:
    title: true
    price: true
    images: true
    sku: true
    description: true
    stock: false
    attributes: false
    variations: false

  # Attribute naming conventions
  attributeNaming:
    enforcePascalCase: true
    allowSpecialCharacters: false
    maxLength: 50
    reservedNames: ['id', 'name', 'type', 'class']

  # Variation detection requirements
  variationDetection:
    requireAttributeSelectors: true
    requireVariationFormSelectors: true
    validateVariationAttributeMapping: true

  # Price format validation
  priceFormat:
    pattern: '^\\d+(\\.\\d{2})?$'
    allowCurrencySymbols: false
    requireDecimalPlaces: true

  # SKU format validation
  skuFormat:
    pattern: '^[A-Z0-9-_]+$'
    minLength: 3
    maxLength: 50

  # Cross-field validation
  crossFieldValidation:
    validateVariationAttributeMapping: true
    requireConsistentNaming: true
